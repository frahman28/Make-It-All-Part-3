<!DOCTYPE html>
<html lang="en">
  <link
    rel=
"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"
    type="text/css"
  />
  <script src=
"https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script
    src=
"https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"
    type="text/javascript"
  ></script>
  <script src=
"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  
  <script src=
"https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.2.2/Chart.min.js"></script>



<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <link rel="stylesheet" href="formatClean.css">
        <link rel="stylesheet" href="../../public/css/employee_styles.css">

    <script src="../../public/js/all_problems.js" defer></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>Analysit Home</title>
</head>

<body>
    <div class="text-center image-div">
        <img class="text-center logo" src="../../public/images/logo.png" alt="make-it-all">
    </div>
    <nav class="navbar navbar-expand-lg bg-dark navbar-dark">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#main-links">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="main-links">
                <ul class="navbar-nav">
                    <li class="nav-item px-4"><a href="my_problems.html" class="nav-link">Home</a></li>
                </ul>
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item dropdown  px-4">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Username here
                        </a>
                        <ul class="dropdown-menu bg-dark dropdown-menu-dark" aria-labelledby="navbarDropdownMenuLink">
                            <li><a class="dropdown-item" href="settings.html">Settings</a></li>
                            <li><a class="dropdown-item" href="#">Logout</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

<section>
  <article class = "rightSide">
    <h2>Analysis Specialist</h2>
    <div class="dropdown">
    <button class="dropbtn" style =" border-radius:15px; ">Select Graph </button>
    <div class="dropdown-content">
     
      <a onclick = "displayUP1('individualGraph2')" >Problems Per Specialist</a>
      <a onclick = "displayUP1('individualGraph3')" >Average Time To Fix A Problem</a>
      <!--<a onclick = "displayUP1('individualGraph1')" >Graph 1</a>-->
    </div>
  </div>
    <br>
    <br>
<!-- contains the different graphs shown in the individual side of the page-->
    <div style= "display:block; background-color: white; width: 100%; border-radius:15px; height: 100%; box-shadow: 5px 10px 10px #979696;" id = "individualGraph2">
        <canvas id="lineChart"></canvas>
    </div>
    <div style= "display:none; background-color: white; width: 100%; border-radius:15px; height: 100%;box-shadow: 5px 10px 10px #979696;" id = "individualGraph1">
         <canvas id="lineChart"></canvas>       
    </div>
    <div style= "display:none; background-color: white; width: 100%; border-radius:15px; height: 100%; box-shadow: 5px 10px 10px #979696;" id = "individualGraph3">     
      <canvas id="barIndSpecial"></canvas>
    </div>
  
<!-- The selection of graphs using the dropdown button-->
    <script>
    function displayUP1(option) {
      var a1 = document.getElementById("individualGraph1");
      var b1 = document.getElementById("individualGraph2");
      var c1 = document.getElementById("individualGraph3");

      if (option == 'individualGraph1'){
        a1.style.display = "block";
        b1.style.display = "none";
        c1.style.display = "none";
      }

      if (option == 'individualGraph2'){
        a1.style.display = "none";
        b1.style.display = "block";
        c1.style.display = "none";
      }

      if (option == 'individualGraph3'){
        a1.style.display = "none";
        b1.style.display = "none";
        c1.style.display = "block";
      }
    }
  </script>
  <br>
  <br>
<!-- Filter Table for employees-->
 <div class="container">
        <form action="">
            <div class="row">
                <div class="col-6">
                    <input type="text" id="search-area" name="search-area" class="form-control" placeholder="Search..">
                </div>
                <div class="col-4">
                    <select id="search-by" name="search-by" class="form-select">
                        <option selected>Search By</option>
                        <option value="first">Serial Number</option>
                        <option value="second">Equpiment Make</option>
                        <option value="td:third">Equpiment Type</option>
                        <option value="td:fourth">Software Running</option>
                    </select>
                </div>
                
        </form>
    </div>
    <br>
    <div class="container">
        <table class="all-problem-table table table-bordered accordion">
            <thead>
                <tr class="table-secondary">
                    <th value = "0">Serial Number</th>
                    <th value = "1" >Equpiment Make</th>
                    <th value = "2" >Equpiment Type</th>
                    <th value = "3" >Software Running</th>
                </tr>
            </thead>
            <tbody id="view-equpiment-table">
                <!-- Dummy data, remove when taking data from database -->
                <tr class="visible-row accordion" data-bs-toggle="collapse">
                    <td>#1</td>
                    <td>15/03/2022</td>
                    <td>Dropped laptop in water.</td>
                    <td>Windows </td>
                </tr>
                <tr class="accordion-collapse collapse" data-bs-parent=".all-problem-table">
                    <td class="hidden-data" colspan="4">
                        <div class="accordion-collapse collapse" data-bs-parent=".all-problem-table">
                            <br>
                            <table class="hidden-table table table-striped table-bordered">
                                <tr>
                                    <td>Problem ID:</td>
                                    <td>1</td>
                                </tr>
                                <tr>
                                    <td>Problem Type:</td>
                                    <td>Hardware</td>
                                </tr>
                                <tr>
                                    <td>Problem Description:</td>
                                    <td>Dropped laptop in water.</td>
                                </tr>
                                <tr>
                                    <td>Solution:</td>
                                    <td>Submerge in bag of rice for 24 hours.</td>
                                </tr>
                                <tr>
                                    <td>Employee Name:</td>
                                    <td>Lisa Poole</td>
                                </tr>
                                <tr>
                                    <td>Specialist Name:</td>
                                    <td>Bert Thompson</td>
                                </tr>
                                <tr>
                                    <td>Opened on:</td>
                                    <td>07/03/2022</td>
                                </tr>
                                <tr>
                                    <td>Closed on:</td>
                                    <td>15/03/2022</td>
                                </tr>
                                <tr>
                                    <td>Operating System:</td>
                                    <td>Windows 10</td>
                                </tr>
                                <tr>
                                    <td>Software Name:</td>
                                    <td>N/A</td>
                                </tr>
                                <tr>
                                    <td>Software Type:</td>
                                    <td>N/A</td>
                                </tr>
                                <tr>
                                    <td>Device Name:</td>
                                    <td>Asus Chromebook</td>
                                </tr>
                                <tr>
                                    <td>Equipment type:</td>
                                    <td>Laptop</td>
                                </tr>
                                <tr>
                                    <td>Serial Number:</td>
                                    <td>299388</td>
                                </tr>
                            </table>
                            <br>
                        </div>
                    </td>
                </tr>
                <tr class="visible-row accordion" data-bs-toggle="collapse">
                    <td>#2</td>
                    <td>09/03/2022</td>
                    <td>Chrome keeps freezing.</td>
                    <td>MacOS</td>
                </tr>
                <tr class="accordion-collapse collapse" data-bs-parent=".all-problem-table">
                    <td class="hidden-data" colspan="4">
                        <div class="accordion-collapse collapse" data-bs-parent=".all-problem-table">
                            <br>
                            <table class="hidden-table table table-striped table-bordered">
                                <tr>
                                    <td>Problem ID:</td>
                                    <td>2</td>
                                </tr>
                                <tr>
                                    <td>Problem Type:</td>
                                    <td>Software</td>
                                </tr>
                                <tr>
                                    <td>Problem Description:</td>
                                    <td>Chrome keeps freezing.</td>
                                </tr>
                                <tr>
                                    <td>Solution:</td>
                                    <td>Clear cache.</td>
                                </tr>
                                <tr>
                                    <td>Employee Name:</td>
                                    <td>Johnny Ipkiss</td>
                                </tr>
                                <tr>
                                    <td>Specialist Name:</td>
                                    <td>Clara Hart</td>
                                </tr>
                                <tr>
                                    <td>Opened on:</td>
                                    <td>03/03/2022</td>
                                </tr>
                                <tr>
                                    <td>Closed on:</td>
                                    <td>09/03/2022</td>
                                </tr>
                                <tr>
                                    <td>Operating System:</td>
                                    <td>Windows 8</td>
                                </tr>
                                <tr>
                                    <td>Software Name:</td>
                                    <td>Google Chrome</td>
                                </tr>
                                <tr>
                                    <td>Software Type:</td>
                                    <td>Application</td>
                                </tr>
                                <tr>
                                    <td>Device Name:</td>
                                    <td>Dell Inspiron</td>
                                </tr>
                                <tr>
                                    <td>Equipment type:</td>
                                    <td>PC</td>
                                </tr>
                                <tr>
                                    <td>Serial Number:</td>
                                    <td>726188</td>
                                </tr>
                            </table>
                            <br>
                        </div>
                    </td>
                </tr>
                <tr class="visible-row accordion" data-bs-toggle="collapse">
                    <td>#3</td>
                    <td>24/02/2022</td>
                    <td>iPad touch screen stopped working.</td>
                    <td>Linux</td>
                </tr>
                <tr class="accordion-collapse collapse" data-bs-parent=".all-problem-table">
                    <td class="hidden-data" colspan="4">
                        <div class="accordion-collapse collapse" data-bs-parent=".all-problem-table">
                            <br>
                            <table class="hidden-table table table-striped table-bordered">
                                <tr>
                                    <td>Problem ID:</td>
                                    <td>6</td>
                                </tr>
                                <tr>
                                    <td>Problem Type:</td>
                                    <td>Hardware</td>
                                </tr>
                                <tr>
                                    <td>Problem Description:</td>
                                    <td>iPad touch screen stopped working.</td>
                                </tr>
                                <tr>
                                    <td>Solution:</td>
                                    <td>N/A</td>
                                </tr>
                                <tr>
                                    <td>Employee Name:</td>
                                    <td>Johnny Ipkiss</td>
                                </tr>
                                <tr>
                                    <td>Specialist Name:</td>
                                    <td>Bert Thompson</td>
                                </tr>
                                <tr>
                                    <td>Opened on:</td>
                                    <td>10/03/2022</td>
                                </tr>
                                <tr>
                                    <td>Closed on:</td>
                                    <td>17/03/2022</td>
                                </tr>
                                <tr>
                                    <td>Operating System:</td>
                                    <td>iOS 15</td>
                                </tr>
                                <tr>
                                    <td>Software Name:</td>
                                    <td>N/A</td>
                                </tr>
                                <tr>
                                    <td>Software Type:</td>
                                    <td>N/A</td>
                                </tr>
                                <tr>
                                    <td>Device Name:</td>
                                    <td>iPad Air</td>
                                </tr>
                                <tr>
                                    <td>Equipment type:</td>
                                    <td>iPad</td>
                                </tr>
                                <tr>
                                    <td>Serial Number:</td>
                                    <td>898181</td>
                                </tr>
                            </table>
                            <br>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

        <script>
            $(document).ready(function(){
              $("#search-area").on("keyup", function() {
                var value = $(this).val().toLowerCase();
                $("#view-equpiment-table tr").filter(function() {
                    $(this).toggle($(this).find(("#search-by").value).text().toLowerCase().indexOf(value) > -1)                });
              });
            });


            
        </script>

<!-- putting graphs in respective divs-->
  </article>
  <article class = "leftSide" >
    <h2>Analysis Problems</h2>
    <div class="dropdown">
    <button class="dropbtn" style =" border-radius:15px; ">Select Graph</button>
    <div class="dropdown-content">
      <a onclick = "displayUP('companyGraph1')" >Number of SoftWare And Hardware Issues</a>
      <a onclick = "displayUP('companyGraph2')" >Most Faulty Equipment</a>
      <a onclick = "displayUP('companyGraph3')" >Number of each Problem Type</a>
    </div>
  </div>
    <br>
    <br>

    <div style= "display:block; background-color: white; width: 100%; border-radius:15px; height: 100%; box-shadow: 5px 10px 10px #979696;" id = "companyGraph1">
       <canvas id="softwareAndHardware"></canvas>
    </div>
    <div style= "display:none; background-color: white; width: 100%; border-radius:15px; height: 100%; box-shadow: 5px 10px 10px #979696;" id = "companyGraph2">
      <canvas id="pieCoSolved"></canvas>
    </div>
    <div style= "display:none; background-color: white; width: 100%; border-radius:15px; height: 100%; box-shadow: 5px 10px 10px #979696;" id = "companyGraph3">    
    <canvas id="pieCoTypes"></canvas>
    </div>
     
     
<!--Function for the graph selection button-->
    <script>
    function displayUP(option) {
      var a = document.getElementById("companyGraph1");
      var b = document.getElementById("companyGraph2");
      var c = document.getElementById("companyGraph3");

      if (option == 'companyGraph1'){
        a.style.display = "block";
        b.style.display = "none";
        c.style.display = "none";
      }

      if (option == 'companyGraph2'){
        a.style.display = "none";
        b.style.display = "block";
        c.style.display = "none";
      }

      if (option == 'companyGraph3'){
        a.style.display = "none";
        b.style.display = "none";
        c.style.display = "block";
      }
    }
  </script>

  <br>
  <br>
<!--Extra stats aboiut the company -->
  <label style="background-color : white;border:solid; width: 100%; padding: 12px;border-style: outset;border-radius: 15px;" for="companyStat">Most Common Problem Type: <?php echo $popularProblem?>  </label> 
  <br>
  <br>
  <label style="background-color :white;border-color: lilac;border-style: outset;border-radius: 15px; width: 100%; padding: 12px;" for="companyStat">Average Days to Solve Problem: <?php echo json_decode($avgTime) ?> </label>
  <br>
  <br>
  <label style="background-color : white;border:  solid; width: 100%; padding: 12px;border-style: outset;border-radius: 15px;" for="companyStat">Total Problem Count : <?php echo json_decode($allProblems) ?> </label>
  <br>
  <br>
  <br>
  <br>


  </article>
</section>


<!--------Creation of Graphs-------->
<script>

    var ctxL = document.getElementById("softwareAndHardware").getContext('2d');
        var myLineChart = new Chart(ctxL, {
          type: 'line',
          data: {
            labels: ["January", "February", "March", "April", "May", "June", "July"],
            datasets: [{
              label: "Software Issues",
              data: [65, 59, 80, 81, 56, 55, 40],
              backgroundColor: [
                'rgba(105, 0, 132, .2)',
              ],
              borderColor: [
                'rgba(200, 99, 132, .7)',
              ],
              borderWidth: 2
            },
            {
              label: "Hardware Issues",
              data: [28, 48, 40, 19, 86, 27, 90],
              backgroundColor: [
                'rgba(0, 137, 132, .2)',
              ],
              borderColor: [
                'rgba(0, 10, 130, .7)',
              ],
              borderWidth: 2
            }
            ]
          },
          options: {
            responsive: true
          }
        });
  </script>

<footer>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

</body>
</html>